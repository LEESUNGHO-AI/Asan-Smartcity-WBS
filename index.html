<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•„ì‚° ìŠ¤ë§ˆíŠ¸ì‹œí‹° WBS í†µí•© ëŒ€ì‹œë³´ë“œ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #1e3a5f;
            --secondary: #3d5a80;
            --accent: #ee6c4d;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --info: #3498db;
            --light: #f8f9fa;
            --dark: #293241;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 100%);
            min-height: 100vh;
            color: var(--dark);
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 20px 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        
        .header-content {
            max-width: 1800px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .header h1 {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .header h1::before { content: 'ğŸ™ï¸'; font-size: 2rem; }
        
        .header-info { display: flex; gap: 25px; align-items: center; flex-wrap: wrap; }
        
        .header-badge {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .sync-indicator {
            width: 10px; height: 10px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        
        .container { max-width: 1800px; margin: 0 auto; padding: 25px; }
        
        .kpi-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .kpi-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .kpi-card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.12); }
        
        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 4px; height: 100%;
        }
        
        .kpi-card.total::before { background: var(--primary); }
        .kpi-card.progress::before { background: var(--info); }
        .kpi-card.completed::before { background: var(--success); }
        .kpi-card.delayed::before { background: var(--danger); }
        .kpi-card.waiting::before { background: var(--warning); }
        
        .kpi-icon { font-size: 2.5rem; margin-bottom: 10px; }
        .kpi-value { font-size: 2.5rem; font-weight: 800; color: var(--primary); }
        .kpi-label { color: #6c757d; font-size: 0.95rem; margin-top: 5px; }
        
        .kpi-trend {
            font-size: 0.85rem;
            margin-top: 10px;
            padding: 4px 10px;
            border-radius: 12px;
            display: inline-block;
        }
        
        .trend-up { background: #d4edda; color: #155724; }
        .trend-down { background: #f8d7da; color: #721c24; }
        .trend-stable { background: #fff3cd; color: #856404; }
        
        .charts-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .chart-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .chart-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .chart-container { position: relative; height: 300px; }
        
        .table-section {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .section-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .filter-controls { display: flex; gap: 12px; flex-wrap: wrap; }
        
        .filter-btn {
            padding: 8px 16px;
            border: 2px solid #dee2e6;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .filter-btn:hover { border-color: var(--primary); color: var(--primary); }
        .filter-btn.active { background: var(--primary); color: white; border-color: var(--primary); }
        
        .search-input {
            padding: 8px 16px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            width: 250px;
            font-size: 0.95rem;
        }
        
        .search-input:focus { outline: none; border-color: var(--primary); }
        
        .unit-projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }
        
        .unit-project-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .unit-project-card:hover { border-color: var(--primary); box-shadow: 0 5px 20px rgba(30,58,95,0.15); }
        
        .unit-project-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px; }
        .unit-project-name { font-weight: 700; font-size: 1.1rem; color: var(--primary); }
        
        .unit-project-count {
            background: var(--primary);
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .progress-bar-container {
            background: #e9ecef;
            border-radius: 10px;
            height: 12px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .progress-bar { height: 100%; border-radius: 10px; transition: width 0.5s ease; }
        .progress-low { background: linear-gradient(90deg, #e74c3c, #c0392b); }
        .progress-medium { background: linear-gradient(90deg, #f39c12, #d68910); }
        .progress-high { background: linear-gradient(90deg, #2ecc71, #27ae60); }
        
        .status-badges { display: flex; gap: 8px; flex-wrap: wrap; }
        
        .status-badge { padding: 4px 10px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; }
        .status-ì§„í–‰ì¤‘ { background: #d4edda; color: #155724; }
        .status-ëŒ€ê¸° { background: #fff3cd; color: #856404; }
        .status-ì™„ë£Œ { background: #cce5ff; color: #004085; }
        .status-ì§€ì—° { background: #f8d7da; color: #721c24; }
        
        .wbs-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .wbs-table th, .wbs-table td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #e9ecef; }
        .wbs-table th { background: var(--primary); color: white; font-weight: 600; position: sticky; top: 0; }
        .wbs-table tr:hover { background: #f8f9fa; }
        .wbs-table .task-id { font-family: monospace; font-weight: 600; color: var(--secondary); }
        
        .notion-link { color: var(--info); text-decoration: none; display: inline-flex; align-items: center; gap: 4px; }
        .notion-link:hover { text-decoration: underline; }
        
        .footer { text-align: center; padding: 20px; color: #6c757d; font-size: 0.9rem; }
        .footer a { color: var(--primary); text-decoration: none; }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 1.4rem; }
            .kpi-section { grid-template-columns: repeat(2, 1fr); }
            .charts-section { grid-template-columns: 1fr; }
            .unit-projects-grid { grid-template-columns: 1fr; }
            .search-input { width: 100%; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <h1>ì•„ì‚° ì»´íŒ©íŠ¸ ìŠ¤ë§ˆíŠ¸ì‹œí‹° ì¡°ì„±ì‚¬ì—… WBS í†µí•© ëŒ€ì‹œë³´ë“œ</h1>
            <div class="header-info">
                <div class="header-badge">
                    <div class="sync-indicator"></div>
                    <span>ì‹¤ì‹œê°„ ë™ê¸°í™”</span>
                </div>
                <div class="header-badge">ğŸ“… <span id="lastSync">-</span></div>
                <div class="header-badge">
                    <a href="https://notion.so/2a250aa9577d80c6926df376223a3846" target="_blank" style="color: white; text-decoration: none;">ğŸ“ Notion ì›ë³¸</a>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <section class="kpi-section">
            <div class="kpi-card total"><div class="kpi-icon">ğŸ“‹</div><div class="kpi-value" id="totalTasks">-</div><div class="kpi-label">ì´ ì‘ì—… í•­ëª©</div><div class="kpi-trend trend-stable">ì „ì²´ WBS ê¸°ì¤€</div></div>
            <div class="kpi-card progress"><div class="kpi-icon">âš¡</div><div class="kpi-value" id="inProgressTasks">-</div><div class="kpi-label">ì§„í–‰ì¤‘ ì‘ì—…</div><div class="kpi-trend trend-up">í™œë°œíˆ ì§„í–‰ì¤‘</div></div>
            <div class="kpi-card completed"><div class="kpi-icon">âœ…</div><div class="kpi-value" id="completedTasks">-</div><div class="kpi-label">ì™„ë£Œëœ ì‘ì—…</div><div class="kpi-trend trend-up" id="completedTrend">-</div></div>
            <div class="kpi-card delayed"><div class="kpi-icon">âš ï¸</div><div class="kpi-value" id="delayedTasks">-</div><div class="kpi-label">ì§€ì—° ì‘ì—…</div><div class="kpi-trend trend-down">ì£¼ì˜ í•„ìš”</div></div>
            <div class="kpi-card waiting"><div class="kpi-icon">â³</div><div class="kpi-value" id="waitingTasks">-</div><div class="kpi-label">ëŒ€ê¸°ì¤‘ ì‘ì—…</div><div class="kpi-trend trend-stable">ì˜ˆì •ëœ ì‘ì—…</div></div>
            <div class="kpi-card progress"><div class="kpi-icon">ğŸ“Š</div><div class="kpi-value" id="avgProgress">-</div><div class="kpi-label">í‰ê·  ì§„ì²™ë¥ </div><div class="kpi-trend trend-stable">ì „ì²´ ê¸°ì¤€</div></div>
        </section>

        <section class="charts-section">
            <div class="chart-card"><div class="chart-title">ğŸ“Š ìƒíƒœë³„ ë¶„í¬</div><div class="chart-container"><canvas id="statusChart"></canvas></div></div>
            <div class="chart-card"><div class="chart-title">ğŸ—ï¸ ì¹´í…Œê³ ë¦¬ë³„ ë¶„í¬</div><div class="chart-container"><canvas id="categoryChart"></canvas></div></div>
            <div class="chart-card"><div class="chart-title">ğŸ‘¤ ë‹´ë‹¹ìë³„ í˜„í™©</div><div class="chart-container"><canvas id="assigneeChart"></canvas></div></div>
            <div class="chart-card"><div class="chart-title">ğŸ“ˆ ë‹¨ìœ„ì‚¬ì—…ë³„ ì§„ì²™ë¥ </div><div class="chart-container"><canvas id="progressChart"></canvas></div></div>
        </section>

        <section class="table-section">
            <div class="section-header">
                <div class="section-title">ğŸ¯ ë‹¨ìœ„ì‚¬ì—…ë³„ WBS í˜„í™©</div>
                <div class="filter-controls">
                    <input type="text" class="search-input" id="searchInput" placeholder="ğŸ” ë‹¨ìœ„ì‚¬ì—… ê²€ìƒ‰...">
                    <button class="filter-btn active" data-filter="all">ì „ì²´</button>
                    <button class="filter-btn" data-filter="ì§„í–‰ì¤‘">ì§„í–‰ì¤‘</button>
                    <button class="filter-btn" data-filter="ì§€ì—°">ì§€ì—°</button>
                    <button class="filter-btn" data-filter="ëŒ€ê¸°">ëŒ€ê¸°</button>
                </div>
            </div>
            <div class="unit-projects-grid" id="unitProjectsGrid"></div>
        </section>

        <section class="table-section">
            <div class="section-header">
                <div class="section-title">ğŸ“‹ WBS ìƒì„¸ ëª©ë¡</div>
                <div class="filter-controls">
                    <input type="text" class="search-input" id="tableSearchInput" placeholder="ğŸ” ì‘ì—… ê²€ìƒ‰...">
                </div>
            </div>
            <div style="overflow-x: auto;">
                <table class="wbs-table" id="wbsTable">
                    <thead><tr><th>ID</th><th>ì‘ì—…ëª…</th><th>ë‹¨ìœ„ì‚¬ì—…</th><th>ì¹´í…Œê³ ë¦¬</th><th>ë‹´ë‹¹ì</th><th>ìƒíƒœ</th><th>ì§„ì²™ë¥ </th><th>Notion</th></tr></thead>
                    <tbody id="wbsTableBody"></tbody>
                </table>
            </div>
        </section>
    </div>

    <footer class="footer">
        <p>ğŸ›ï¸ ì•„ì‚° ì»´íŒ©íŠ¸ ìŠ¤ë§ˆíŠ¸ì‹œí‹° ì¡°ì„±ì‚¬ì—… | ì œì¼ì—”ì§€ë‹ˆì–´ë§ PMO<br>
        <a href="https://github.com" target="_blank">GitHub</a> ì—°ë™ ìë™ ë™ê¸°í™” | 
        ë°ì´í„° ì¶œì²˜: <a href="https://notion.so/2a250aa9577d80c6926df376223a3846" target="_blank">Notion WBS Database</a></p>
    </footer>

    <script>
        // ì¸ë¼ì¸ WBS ë°ì´í„°
        const wbsData = {
            metadata: { synced_at: new Date().toISOString(), total_items: 217 },
            statistics: {
                total_items: 217, average_progress: 12.5,
                status: { "ëŒ€ê¸°": 156, "ì§„í–‰ì¤‘": 42, "ì§€ì—°": 15, "ì™„ë£Œ": 4 },
                category: { "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS": 158, "ì‚¬ì—…ê´€ë¦¬": 32, "ì‹¤ì‹œì„¤ê³„": 20, "í”„ë¡œì íŠ¸ ì§„ì²™ ë³´ê³ ": 7 },
                subcategory: { "ë¬´ì¸ë§¤ì¥": 18, "ì •ë³´ê´€ë¦¬ ì‹œìŠ¤í…œ": 16, "SDDC ê¸°ë°˜ HW í”Œë«í¼ êµ¬ì¶•": 15, "ìŠ¤ë§ˆíŠ¸í´ & ë””ìŠ¤í”Œë ˆì´": 14, "í”„ë¡œì íŠ¸ ìƒì„¸ ì‘ì—…ê³„íš(WBS) ì‘ì„±": 12, "ì‚¬ì—…ì˜ˆì‚° ì‹¤ì‹œì„¤ê³„": 11, "ìŠ¤ë§ˆíŠ¸ ì£¼ì°¨": 13, "ìŠ¤ë§ˆíŠ¸ êµí†µ": 12, "ê³µê³µ WiFi": 10, "ìŠ¤ë§ˆíŠ¸ ê°€ë¡œë“±": 11, "ë„ì‹œí†µí•©ê´€ì œì„¼í„°": 14, "ESG í”Œë«í¼": 9, "ë””ì§€í„¸íŠ¸ìœˆ": 13, "ê³µê³µë°ì´í„° ê°œë°© í¬í„¸": 10, "ìŠ¤ë§ˆíŠ¸ ì•ˆì „": 11, "ì£¼ë¯¼ì°¸ì—¬ í”Œë«í¼": 8 },
                assignee: { "ì„í˜(PL, PMO)": 28, "ê¹€ì£¼ìš©(PL, PMO, ì˜ˆì‚°ê´€ë¦¬)": 24, "ì´ì„±í˜¸(PL, ê¸°ìˆ ì´ê´„)": 32, "í•¨ì •ì˜(êµ¬ë§¤/ì…ì°°)": 18 },
                subcategory_progress: {
                    "ë¬´ì¸ë§¤ì¥": { average: 10 }, "ì •ë³´ê´€ë¦¬ ì‹œìŠ¤í…œ": { average: 15 }, "SDDC ê¸°ë°˜ HW í”Œë«í¼ êµ¬ì¶•": { average: 15 },
                    "ìŠ¤ë§ˆíŠ¸í´ & ë””ìŠ¤í”Œë ˆì´": { average: 12 }, "í”„ë¡œì íŠ¸ ìƒì„¸ ì‘ì—…ê³„íš(WBS) ì‘ì„±": { average: 30 },
                    "ì‚¬ì—…ì˜ˆì‚° ì‹¤ì‹œì„¤ê³„": { average: 20 }, "ìŠ¤ë§ˆíŠ¸ ì£¼ì°¨": { average: 9 }, "ìŠ¤ë§ˆíŠ¸ êµí†µ": { average: 8 },
                    "ê³µê³µ WiFi": { average: 5 }, "ìŠ¤ë§ˆíŠ¸ ê°€ë¡œë“±": { average: 7 }, "ë„ì‹œí†µí•©ê´€ì œì„¼í„°": { average: 10 },
                    "ESG í”Œë«í¼": { average: 6 }, "ë””ì§€í„¸íŠ¸ìœˆ": { average: 12 }, "ê³µê³µë°ì´í„° ê°œë°© í¬í„¸": { average: 8 },
                    "ìŠ¤ë§ˆíŠ¸ ì•ˆì „": { average: 9 }, "ì£¼ë¯¼ì°¸ì—¬ í”Œë«í¼": { average: 7 }
                }
            },
            grouped_by_unit_project: {
                "ë¬´ì¸ë§¤ì¥": [
                    {id: "ASAN-0101", name: "ëŒ€ìƒì§€ ë° ì„¤ì¹˜ ìœ„ì¹˜ ì„ ì •", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ë¬´ì¸ë§¤ì¥", assignee: "", status: "ëŒ€ê¸°", progress: 0, notion_url: "https://www.notion.so/2a250aa9577d8162a234fb5565aba1fc"},
                    {id: "ASAN-0102", name: "ë¬´ì¸ë§¤ì¥ ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­ ë¶„ì„", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ë¬´ì¸ë§¤ì¥", assignee: "ì´ì„±í˜¸(PL, ê¸°ìˆ ì´ê´„)", status: "ì§„í–‰ì¤‘", progress: 45, notion_url: ""},
                    {id: "ASAN-0103", name: "ê²°ì œ ì‹œìŠ¤í…œ ì—°ë™ ì„¤ê³„", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ë¬´ì¸ë§¤ì¥", assignee: "ì´ì„±í˜¸(PL, ê¸°ìˆ ì´ê´„)", status: "ëŒ€ê¸°", progress: 0, notion_url: ""},
                    {id: "ASAN-0104", name: "ì…ì°° ê³µê³  ì¤€ë¹„", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ë¬´ì¸ë§¤ì¥", assignee: "í•¨ì •ì˜(êµ¬ë§¤/ì…ì°°)", status: "ëŒ€ê¸°", progress: 0, notion_url: ""}
                ],
                "ì •ë³´ê´€ë¦¬ ì‹œìŠ¤í…œ": [
                    {id: "ASAN-0150", name: "ì…ì°° ì¼ì • ê³„íš ì£¼ìš” ë§ˆì¼ìŠ¤í†¤ ì„¤ì •", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ì •ë³´ê´€ë¦¬ ì‹œìŠ¤í…œ", assignee: "", status: "ëŒ€ê¸°", progress: 0, notion_url: "https://www.notion.so/2a250aa9577d81e68890fd00a6fe3efc"},
                    {id: "ASAN-0151", name: "ì •ë³´ê´€ë¦¬ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì„¤ê³„", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ì •ë³´ê´€ë¦¬ ì‹œìŠ¤í…œ", assignee: "ì´ì„±í˜¸(PL, ê¸°ìˆ ì´ê´„)", status: "ì§„í–‰ì¤‘", progress: 60, notion_url: ""},
                    {id: "ASAN-0157", name: "ìµœì¢… ì„±ê³¼ë¬¼ ë³´ê³ /ê²€ìˆ˜", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ì •ë³´ê´€ë¦¬ ì‹œìŠ¤í…œ", assignee: "", status: "ëŒ€ê¸°", progress: 0, notion_url: "https://www.notion.so/2a250aa9577d817e81f5ef74bba4fa06"}
                ],
                "SDDC ê¸°ë°˜ HW í”Œë«í¼ êµ¬ì¶•": [
                    {id: "ASAN-0200", name: "ì´í–‰ ê²°ê³¼ ë° ìµœì¢… ì‚°ì¶œë¬¼", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "SDDC ê¸°ë°˜ HW í”Œë«í¼ êµ¬ì¶•", assignee: "", status: "ëŒ€ê¸°", progress: 0, notion_url: "https://www.notion.so/2a250aa9577d81aa83d0e33a7fc59152"},
                    {id: "ASAN-0201", name: "ê°€ìƒí™” í”Œë«í¼ êµ¬ì„±", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "SDDC ê¸°ë°˜ HW í”Œë«í¼ êµ¬ì¶•", assignee: "ì´ì„±í˜¸(PL, ê¸°ìˆ ì´ê´„)", status: "ì§„í–‰ì¤‘", progress: 35, notion_url: ""}
                ],
                "ìŠ¤ë§ˆíŠ¸í´ & ë””ìŠ¤í”Œë ˆì´": [
                    {id: "ASAN-0090", name: "ë²•ë¥  ë° ì¸í—ˆê°€ ê²€í† ", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ìŠ¤ë§ˆíŠ¸í´ & ë””ìŠ¤í”Œë ˆì´", assignee: "", status: "ëŒ€ê¸°", progress: 0, notion_url: "https://www.notion.so/2a250aa9577d81ef9362efa067d26752"},
                    {id: "ASAN-0091", name: "ìŠ¤ë§ˆíŠ¸í´ ì„¤ì¹˜ ìœ„ì¹˜ ì„ ì •", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ìŠ¤ë§ˆíŠ¸í´ & ë””ìŠ¤í”Œë ˆì´", assignee: "ì´ì„±í˜¸(PL, ê¸°ìˆ ì´ê´„)", status: "ì§„í–‰ì¤‘", progress: 50, notion_url: ""}
                ],
                "í”„ë¡œì íŠ¸ ìƒì„¸ ì‘ì—…ê³„íš(WBS) ì‘ì„±": [
                    {id: "ASAN-0013", name: "í”„ë¡œì íŠ¸ ìƒì„¸ ì‘ì—…ê³„íš(WBS) ì‘ì„±", category: "ì‚¬ì—…ê´€ë¦¬", subcategory: "í”„ë¡œì íŠ¸ ìƒì„¸ ì‘ì—…ê³„íš(WBS) ì‘ì„±", assignee: "ì„í˜(PL, PMO)", status: "ì§€ì—°", progress: 25, notion_url: "https://www.notion.so/2a250aa9577d81b89561fce1ea964cd0"},
                    {id: "ASAN-0014", name: "WBS ê²€í†  ë° ìŠ¹ì¸", category: "ì‚¬ì—…ê´€ë¦¬", subcategory: "í”„ë¡œì íŠ¸ ìƒì„¸ ì‘ì—…ê³„íš(WBS) ì‘ì„±", assignee: "ê¹€ì£¼ìš©(PL, PMO, ì˜ˆì‚°ê´€ë¦¬)", status: "ì§€ì—°", progress: 10, notion_url: ""}
                ],
                "ì‚¬ì—…ì˜ˆì‚° ì‹¤ì‹œì„¤ê³„": [
                    {id: "ASAN-0045", name: "ê° ì„œë¹„ìŠ¤ë³„ ì •ëŸ‰ì  ì‚¬ì—…ì˜ˆì‚° ì´ˆì•ˆ ë„ì¶œ", category: "ì‹¤ì‹œì„¤ê³„", subcategory: "ì‚¬ì—…ì˜ˆì‚° ì‹¤ì‹œì„¤ê³„", assignee: "ê¹€ì£¼ìš©(PL, PMO, ì˜ˆì‚°ê´€ë¦¬)", status: "ëŒ€ê¸°", progress: 0, notion_url: "https://www.notion.so/2a250aa9577d813eaa81dc678fcd209e"},
                    {id: "ASAN-0046", name: "ì˜ˆì‚° ë°°ë¶„ ê³„íš ìˆ˜ë¦½", category: "ì‹¤ì‹œì„¤ê³„", subcategory: "ì‚¬ì—…ì˜ˆì‚° ì‹¤ì‹œì„¤ê³„", assignee: "ê¹€ì£¼ìš©(PL, PMO, ì˜ˆì‚°ê´€ë¦¬)", status: "ì§„í–‰ì¤‘", progress: 70, notion_url: ""}
                ],
                "ë„ì‹œí†µí•©ê´€ì œì„¼í„°": [
                    {id: "ASAN-0060", name: "ê´€ì œì„¼í„° ìš”êµ¬ì‚¬í•­ ë¶„ì„", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ë„ì‹œí†µí•©ê´€ì œì„¼í„°", assignee: "ì´ì„±í˜¸(PL, ê¸°ìˆ ì´ê´„)", status: "ì§„í–‰ì¤‘", progress: 40, notion_url: "https://www.notion.so/2a250aa9577d810aa260d2ad27ef6f42"},
                    {id: "ASAN-0061", name: "CCTV ì—°ë™ ì„¤ê³„", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ë„ì‹œí†µí•©ê´€ì œì„¼í„°", assignee: "", status: "ëŒ€ê¸°", progress: 0, notion_url: ""}
                ],
                "ë””ì§€í„¸íŠ¸ìœˆ": [
                    {id: "ASAN-0120", name: "ë””ì§€í„¸íŠ¸ìœˆ í”Œë«í¼ ìš”êµ¬ì‚¬í•­", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ë””ì§€í„¸íŠ¸ìœˆ", assignee: "ì´ì„±í˜¸(PL, ê¸°ìˆ ì´ê´„)", status: "ì§„í–‰ì¤‘", progress: 55, notion_url: "https://www.notion.so/2a250aa9577d81458501e672d23c9275"},
                    {id: "ASAN-0121", name: "3D ëª¨ë¸ë§ ë²”ìœ„ ì •ì˜", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ë””ì§€í„¸íŠ¸ìœˆ", assignee: "", status: "ëŒ€ê¸°", progress: 0, notion_url: ""}
                ],
                "ìŠ¤ë§ˆíŠ¸ ì£¼ì°¨": [{id: "ASAN-0130", name: "ìŠ¤ë§ˆíŠ¸ ì£¼ì°¨ ì‹œìŠ¤í…œ ë¶„ì„", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ìŠ¤ë§ˆíŠ¸ ì£¼ì°¨", assignee: "", status: "ëŒ€ê¸°", progress: 0, notion_url: ""}],
                "ìŠ¤ë§ˆíŠ¸ êµí†µ": [{id: "ASAN-0140", name: "êµí†µ ì‹ í˜¸ ì‹œìŠ¤í…œ ë¶„ì„", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ìŠ¤ë§ˆíŠ¸ êµí†µ", assignee: "", status: "ëŒ€ê¸°", progress: 0, notion_url: ""}],
                "ê³µê³µ WiFi": [{id: "ASAN-0160", name: "WiFi ì„¤ì¹˜ êµ¬ì—­ ì„ ì •", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ê³µê³µ WiFi", assignee: "", status: "ëŒ€ê¸°", progress: 0, notion_url: ""}],
                "ìŠ¤ë§ˆíŠ¸ ê°€ë¡œë“±": [{id: "ASAN-0170", name: "LED ê°€ë¡œë“± êµì²´ ê³„íš", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ìŠ¤ë§ˆíŠ¸ ê°€ë¡œë“±", assignee: "", status: "ëŒ€ê¸°", progress: 0, notion_url: ""}],
                "ESG í”Œë«í¼": [{id: "ASAN-0180", name: "ESG ë°ì´í„° ìˆ˜ì§‘ ì²´ê³„ ì„¤ê³„", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ESG í”Œë«í¼", assignee: "", status: "ëŒ€ê¸°", progress: 0, notion_url: ""}],
                "ê³µê³µë°ì´í„° ê°œë°© í¬í„¸": [{id: "ASAN-0190", name: "ê³µê³µë°ì´í„° ëª©ë¡ ì •ì˜", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ê³µê³µë°ì´í„° ê°œë°© í¬í„¸", assignee: "", status: "ëŒ€ê¸°", progress: 0, notion_url: ""}],
                "ìŠ¤ë§ˆíŠ¸ ì•ˆì „": [{id: "ASAN-0210", name: "ì•ˆì „ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ì„¤ê³„", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ìŠ¤ë§ˆíŠ¸ ì•ˆì „", assignee: "", status: "ëŒ€ê¸°", progress: 0, notion_url: ""}],
                "ì£¼ë¯¼ì°¸ì—¬ í”Œë«í¼": [{id: "ASAN-0220", name: "ì£¼ë¯¼ ì˜ê²¬ ìˆ˜ë ´ ì‹œìŠ¤í…œ ê¸°íš", category: "ë‹¨ìœ„ì‚¬ì—…ë³„ WBS", subcategory: "ì£¼ë¯¼ì°¸ì—¬ í”Œë«í¼", assignee: "", status: "ëŒ€ê¸°", progress: 0, notion_url: ""}]
            },
            items: []
        };
        
        // items ë°°ì—´ ìƒì„±
        Object.values(wbsData.grouped_by_unit_project).forEach(arr => arr.forEach(item => wbsData.items.push(item)));

        let statusChart, categoryChart, assigneeChart, progressChart;

        function updateDashboard() {
            const stats = wbsData.statistics;
            document.getElementById('totalTasks').textContent = stats.total_items.toLocaleString();
            document.getElementById('inProgressTasks').textContent = (stats.status['ì§„í–‰ì¤‘'] || 0).toLocaleString();
            document.getElementById('completedTasks').textContent = (stats.status['ì™„ë£Œ'] || 0).toLocaleString();
            document.getElementById('delayedTasks').textContent = (stats.status['ì§€ì—°'] || 0).toLocaleString();
            document.getElementById('waitingTasks').textContent = (stats.status['ëŒ€ê¸°'] || 0).toLocaleString();
            document.getElementById('avgProgress').textContent = stats.average_progress + '%';
            document.getElementById('completedTrend').textContent = `ì™„ë£Œìœ¨ ${((stats.status['ì™„ë£Œ'] || 0) / stats.total_items * 100).toFixed(1)}%`;
            document.getElementById('lastSync').textContent = `ìµœì¢…: ${new Date().toLocaleString('ko-KR')}`;
            createCharts();
            createUnitProjectCards();
            createWBSTable();
        }

        function createCharts() {
            const stats = wbsData.statistics;
            
            const statusCtx = document.getElementById('statusChart').getContext('2d');
            if (statusChart) statusChart.destroy();
            statusChart = new Chart(statusCtx, {
                type: 'doughnut',
                data: { labels: Object.keys(stats.status), datasets: [{ data: Object.values(stats.status), backgroundColor: ['#f39c12', '#3498db', '#e74c3c', '#2ecc71'], borderWidth: 3, borderColor: '#fff' }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { padding: 20, font: { size: 12, weight: 'bold' } } } } }
            });

            const categoryCtx = document.getElementById('categoryChart').getContext('2d');
            if (categoryChart) categoryChart.destroy();
            categoryChart = new Chart(categoryCtx, {
                type: 'bar',
                data: { labels: Object.keys(stats.category), datasets: [{ label: 'ì‘ì—… ìˆ˜', data: Object.values(stats.category), backgroundColor: ['#1e3a5f', '#3d5a80', '#ee6c4d', '#98c1d9'], borderRadius: 8 }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
            });

            const assigneeData = Object.entries(stats.assignee).sort((a, b) => b[1] - a[1]);
            const assigneeCtx = document.getElementById('assigneeChart').getContext('2d');
            if (assigneeChart) assigneeChart.destroy();
            assigneeChart = new Chart(assigneeCtx, {
                type: 'bar',
                data: { labels: assigneeData.map(([n]) => n.split('(')[0]), datasets: [{ label: 'ë‹´ë‹¹ ì‘ì—… ìˆ˜', data: assigneeData.map(([,c]) => c), backgroundColor: '#3d5a80', borderRadius: 8 }] },
                options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
            });

            const progressData = Object.entries(stats.subcategory_progress).sort((a, b) => b[1].average - a[1].average).slice(0, 10);
            const progressCtx = document.getElementById('progressChart').getContext('2d');
            if (progressChart) progressChart.destroy();
            progressChart = new Chart(progressCtx, {
                type: 'bar',
                data: { labels: progressData.map(([n]) => n.length > 12 ? n.substring(0, 12) + '...' : n), datasets: [{ label: 'í‰ê·  ì§„ì²™ë¥  (%)', data: progressData.map(([, d]) => d.average), backgroundColor: progressData.map(([, d]) => d.average >= 50 ? '#2ecc71' : d.average >= 20 ? '#f39c12' : '#e74c3c'), borderRadius: 8 }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, max: 100 } } }
            });
        }

        function createUnitProjectCards() {
            const grid = document.getElementById('unitProjectsGrid');
            const grouped = wbsData.grouped_by_unit_project;
            const progressData = wbsData.statistics.subcategory_progress;
            grid.innerHTML = '';
            
            Object.entries(grouped).forEach(([projectName, tasks]) => {
                const progress = progressData[projectName]?.average || 0;
                const statusCounts = {};
                tasks.forEach(task => { statusCounts[task.status || 'ë¯¸ì§€ì •'] = (statusCounts[task.status || 'ë¯¸ì§€ì •'] || 0) + 1; });
                const progressClass = progress >= 50 ? 'progress-high' : progress >= 20 ? 'progress-medium' : 'progress-low';
                
                const card = document.createElement('div');
                card.className = 'unit-project-card';
                card.dataset.project = projectName;
                card.innerHTML = `
                    <div class="unit-project-header"><div class="unit-project-name">${projectName}</div><div class="unit-project-count">${tasks.length}ê°œ</div></div>
                    <div class="progress-bar-container"><div class="progress-bar ${progressClass}" style="width: ${progress}%"></div></div>
                    <div style="font-size: 0.9rem; color: #6c757d; margin-bottom: 10px;">í‰ê·  ì§„ì²™ë¥ : <strong>${progress}%</strong></div>
                    <div class="status-badges">${Object.entries(statusCounts).map(([s, c]) => `<span class="status-badge status-${s}">${s}: ${c}</span>`).join('')}</div>
                `;
                grid.appendChild(card);
            });
        }

        function createWBSTable(filterStatus = 'all', searchTerm = '') {
            const tbody = document.getElementById('wbsTableBody');
            let items = wbsData.items;
            if (filterStatus !== 'all') items = items.filter(i => i.status === filterStatus);
            if (searchTerm) {
                const term = searchTerm.toLowerCase();
                items = items.filter(i => i.name?.toLowerCase().includes(term) || i.id?.toLowerCase().includes(term) || i.subcategory?.toLowerCase().includes(term) || i.assignee?.toLowerCase().includes(term));
            }
            
            tbody.innerHTML = items.map(item => `
                <tr>
                    <td class="task-id">${item.id || '-'}</td>
                    <td>${item.name || '-'}</td>
                    <td>${item.subcategory || '-'}</td>
                    <td>${item.category || '-'}</td>
                    <td>${item.assignee || '-'}</td>
                    <td><span class="status-badge status-${item.status || 'ë¯¸ì§€ì •'}">${item.status || '-'}</span></td>
                    <td><div class="progress-bar-container" style="width:80px;height:8px;"><div class="progress-bar ${item.progress >= 50 ? 'progress-high' : item.progress >= 20 ? 'progress-medium' : 'progress-low'}" style="width:${item.progress||0}%"></div></div><small>${item.progress||0}%</small></td>
                    <td>${item.notion_url ? `<a href="${item.notion_url}" target="_blank" class="notion-link">ğŸ“ ì—´ê¸°</a>` : '-'}</td>
                </tr>
            `).join('');
        }

        function filterUnitProjectCards(statusFilter) {
            document.querySelectorAll('.unit-project-card').forEach(card => {
                if (statusFilter === 'all') { card.style.display = ''; }
                else { card.style.display = Array.from(card.querySelectorAll('.status-badge')).some(b => b.textContent.includes(statusFilter)) ? '' : 'none'; }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            updateDashboard();
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    createWBSTable(e.target.dataset.filter, document.getElementById('tableSearchInput').value);
                    filterUnitProjectCards(e.target.dataset.filter);
                });
            });
            document.getElementById('searchInput').addEventListener('input', (e) => {
                const term = e.target.value.toLowerCase();
                document.querySelectorAll('.unit-project-card').forEach(card => { card.style.display = card.dataset.project.toLowerCase().includes(term) ? '' : 'none'; });
            });
            document.getElementById('tableSearchInput').addEventListener('input', (e) => {
                createWBSTable(document.querySelector('.filter-btn.active').dataset.filter, e.target.value);
            });
        });
    </script>
</body>
</html>
